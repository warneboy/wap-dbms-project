<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UploadProduct</title>

  <style>
    /* ===== GLOBAL RESET ===== */
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background:#f2f5f9; color:#333; line-height:1.5; }

    /* ===== TOP BAR ===== */
    .top-bar { background:#1c1f26; padding:15px 50px; text-align:right; }
    .upload-btn {
      padding: 20px 30px;
      font-size:16px;
      background:#0fe4e4;
      color:#1c1f26;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:bold;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .upload-btn:hover { background:#0bc4c4; }
    .upload-btn::after {
      content: '▼';
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size:14px;
      transition: all 0.3s ease;
    }
    .upload-btn.active::after { content: '▲'; }

    /* ===== FORM CONTAINER ===== */
    #uploadForm {
      max-width: 600px;
      margin: 20px auto 50px auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: all 0.5s ease;
    }
    #uploadForm.open {
      max-height: 2000px;
      opacity: 1;
    }
    #uploadForm h2 {
      text-align:center;
      margin-bottom:25px;
      color:#1c1f26;
      font-size:28px;
    }
    #uploadForm label {
      display:block;
      font-weight:600;
      margin-bottom:6px;
      color:#555;
      margin-top:10px;
    }
    #uploadForm input, #uploadForm select, #uploadForm textarea {
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid #ccc;
      font-size:15px;
      margin-bottom:10px;
    }
    #uploadForm textarea { resize: vertical; }
    #uploadForm button[type="submit"] {
      width:100%;
      padding:12px;
      font-size:16px;
      background:#0fe4e4;
      color:#1c1f26;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-weight:bold;
      transition: all 0.3s;
      margin-top:10px;
    }
    #uploadForm button[type="submit"]:hover { background:#0bc4c4; }

    /* ===== SIZE ITEMS ===== */
    .size-item { display:flex; align-items:center; margin-bottom:8px; }
    .size-item input[type="number"] {
      width:80px; margin-left:10px; padding:6px; border-radius:6px; border:1px solid #ccc;
    }

    /* ===== FOOTER IMAGE PREVIEW ===== */
    footer {
      max-width:600px;
      margin:0 auto 50px auto;
      text-align:center;
    }
    footer h3 {
      font-size:20px; margin-bottom:12px; color:#1c1f26;
    }
    footer img {
      max-width:100%; max-height:300px; border-radius:12px;
      box-shadow:0 4px 15px rgba(0,0,0,0.1); display:none;
      transition: all 0.3s ease;
    }

    /* ===== FORM CLOSED LABEL ===== */
    .form-closed-label {
      text-align:center;
      color:#888;
      font-size:14px;
      margin-top:5px;
      transition: opacity 0.3s;
    }
    .form-closed-label.hidden { opacity:0; height:0; overflow:hidden; }
  </style>
</head>
<body>

<!-- ===== Upload Button ===== -->
<div class="top-bar">
  <button class="upload-btn" id="toggleUploadBtn">Upload Product</button>
  <div id="formClosedLabel" class="form-closed-label">Form Closed</div>
</div>

<!-- ===== Upload Form ===== -->
<div class="container" id="uploadForm">
  <h2>Upload Product Info</h2>

  <form action="/add-product" method="POST" enctype="multipart/form-data">
    <label for="pname">Product Name</label>
    <input type="text" id="pname" name="pname" required>

    <label for="description">Description</label>
    <textarea id="description" name="description" rows="3"></textarea>

    <label for="category">Category</label>
    <select id="category" name="category" required>
      <option value="">-- Select Category --</option>
      <option value="Motors, Tools & DIY">Motors, Tools & DIY</option>
      <option value="Home & Lifestyle">Home & Lifestyle</option>
      <option value="Sports & Outdoor">Sports & Outdoor</option>
      <option value="Electronic Accessories">Electronic Accessories</option>
      <option value="Groceries & Pets">Groceries & Pets</option>
      <option value="Electronic Devices">Electronic Devices</option>
      <option value="TV & Home Appliances">TV & Home Appliances</option>
      <option value="Men's Fashion">Men's Fashion</option>
    </select>

    <label>Sizes & Quantities</label>
    <div id="size-container"></div>

    <label for="price">Price</label>
    <input type="number" id="price" name="price" step="0.01" required>

    <label for="discount">Discount (%)</label>
    <input type="number" id="discount" name="discount" step="0.01" value="0.00">

    <label for="image">Product Image</label>
    <input type="file" id="image" name="image" accept="image/*" required>
    <footer>
  <h3>Uploaded Image Preview</h3>
  <img id="preview-img" alt="Preview">
</footer>
    <button type="submit">Upload Product</button>
  </form>
</div>

<!-- ===== Footer Image Preview ===== -->


<script>
  const toggleBtn = document.getElementById('toggleUploadBtn');
  const uploadForm = document.getElementById('uploadForm');
  const formClosedLabel = document.getElementById('formClosedLabel');
  const imageInput = document.getElementById("image");
  const previewImg = document.getElementById("preview-img");
  const categorySelect = document.getElementById("category");
  const sizeContainer = document.getElementById("size-container");

  /* ===== Toggle Form Open/Close ===== */
  toggleBtn.addEventListener('click', () => {
    uploadForm.classList.toggle('open');
    toggleBtn.classList.toggle('active');

    if (uploadForm.classList.contains('open')) {
      formClosedLabel.classList.add('hidden');
      uploadForm.scrollIntoView({ behavior: 'smooth' });
    } else {
      formClosedLabel.classList.remove('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  });

  /* ===== Image Preview in Footer ===== */
  imageInput.addEventListener("change", function () {
    const file = this.files[0];
    if (file) {
      previewImg.src = URL.createObjectURL(file);
      previewImg.style.display = "block";
    }
  });

  /* ===== Category Size Logic ===== */
  const categorySizes = {
    "Motors, Tools & DIY": ["Small", "Medium", "Large"],
    "Home & Lifestyle": ["Standard", "Large", "Extra Large"],
    "Sports & Outdoor": ["S", "M", "L", "XL"],
    "Electronic Accessories": ["One Size"],
    "Groceries & Pets": ["Pack of 1", "Pack of 5", "Pack of 10"],
    "Electronic Devices": ["32GB", "64GB", "128GB", "256GB"],
    "TV & Home Appliances": ["32 inch", "40 inch", "50 inch", "65 inch"],
    "Men's Fashion": ["S", "M", "L", "XL", "XXL"]
  };

  categorySelect.addEventListener("change", function () {
    sizeContainer.innerHTML = "";
    const selectedCategory = this.value;
    if (categorySizes[selectedCategory]) {
      categorySizes[selectedCategory].forEach(size => {
        const div = document.createElement("div");
        div.className = "size-item";

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.name = "sizes[]";
        checkbox.value = size;

        const label = document.createElement("label");
        label.textContent = size;
        label.style.marginLeft = "6px";

        const qty = document.createElement("input");
        qty.type = "number";
        qty.name = `quantity[${size}]`;
        qty.placeholder = "Qty";
        qty.disabled = true;

        checkbox.addEventListener("change", () => {
          qty.disabled = !checkbox.checked;
          if (!checkbox.checked) qty.value = "";
        });

        div.appendChild(checkbox);
        div.appendChild(label);
        div.appendChild(qty);
        sizeContainer.appendChild(div);
      });
    }
  });
</script>
</body>
</html>
